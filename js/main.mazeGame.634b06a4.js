!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=50)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(19),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(18),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(1),c=n.n(o),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i()(this,t),this.row=e,this.col=n,this.visited=!1,this.borders={top:!0,right:!0,bottom:!0,left:!0}}return c()(t,null,[{key:"removeBordersBetween",value:function(t,e){var n=t.row-e.row,r=t.col-e.col;1===n?(t.borders.top=!1,e.borders.bottom=!1):-1===n&&(t.borders.bottom=!1,e.borders.top=!1),1===r?(t.borders.left=!1,e.borders.right=!1):-1===r&&(t.borders.right=!1,e.borders.left=!1)}}]),t}();e.a=l},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(5),i=n(3),o=n(26),c=n(30),l=function(t,e,n){var s,u,a,h=t&l.F,f=t&l.G,d=t&l.S,v=t&l.P,p=t&l.B,g=t&l.W,b=f?i:i[e]||(i[e]={}),x=b.prototype,w=f?r:d?r[e]:(r[e]||{}).prototype;f&&(n=e);for(s in n)(u=!h&&w&&void 0!==w[s])&&s in b||(a=u?w[s]:n[s],b[s]=f&&"function"!=typeof w[s]?n[s]:p&&u?o(a,r):g&&w[s]==a?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):v&&"function"==typeof a?o(Function.call,a):a,v&&((b.virtual||(b.virtual={}))[s]=a,t&l.R&&x&&!x[s]&&c(x,s,a)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(23),i=n(31),o=n(43),c=Object.defineProperty;e.f=n(2)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(11),i=n(9);t.exports=function(t){return r(i(t))}},function(t,e){},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(1),c=n.n(o),l=n(8),s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;i()(this,t);for(var r=[],o=0;o<e;o++)for(var c=0;c<n;c++)r.push(new l.a(o,c));this.cells=r,this.rows=e,this.cols=n,this.getCell=this.getCell.bind(this)}return c()(t,[{key:"getCell",value:function(t,e){var n=this.cells,r=this.rows,i=this.cols;if(!(t<0||e<0||t>r-1||e>i-1))return n[e+t*i]}},{key:"getCellNeighbour",value:function(t){var e=this.getCell,n=t.row,r=t.col,i=[],o={top:e(n-1,r),right:e(n,r+1),bottom:e(n+1,r),left:e(n,r-1)};for(var c in o)o[c]&&!o[c].visited&&i.push(o[c]);return i.length?i[parseInt(Math.random()*i.length,10)]:void 0}}]),t}();e.a=s},function(t,e,n){"use strict";var r=n(7),i=n.n(r),o=n(0),c=n.n(o),l=n(1),s=n.n(l),u=n(49),a=n(51),h={2:"left",4:"right",8:"top",16:"bottom"},f={top:"bottom",bottom:"top",left:"right",right:"left"},d="#274f59",v=4,p=function(){function t(e,n,r,i,o,l){c()(this,t);var s=new u.a(e,r,i);this.canvas=s.canvas,this.line=s.line,this.ctx=s.ctx,this.canvasMove=n,this.ctxForMove=n.getContext("2d"),n.width=r,n.height=i,this.canvasWidth=r,this.canvasHeight=i,this.dataset=l,this.size=o,this.cellWidth=r/o.cols,this.cellHeight=i/o.rows;var a=Math.floor(Math.min(this.cellWidth,this.cellHeight)/7);this.roadDash=[a,a+v],console.log(this.roadDash),this.wallWidth=4,this.wallBorderWidth=12,this.currentRoute=null,this.output=null,this.currentIndex=void 0,this.outputIndex=void 0,this.swipeLock=!1,this.moveObjImg=null,this.moveObjSize={},this.disable=!1,this.ctx.save(),this.ctx.fillStyle=d,this.ctx.fillRect(0,0,r,i),this.ctx.restore(),this.generate(),this.bind()}return s()(t,[{key:"generate",value:function(){var t=this,e=[],n=[],r=[];this.ctx.save(),this.dataset.forEach(function(i,o){var c=i.col*t.cellWidth+t.cellWidth,l=i.row*t.cellHeight+t.cellHeight,s={top:{wall:function(t,e,n,r){return function(){this.line(n*this.cellWidth,r*this.cellHeight,t,r*this.cellHeight,this.wallWidth,"square")}},road:function(){t.line(i.col*t.cellWidth+t.cellWidth/2,i.row*t.cellHeight,i.col*t.cellWidth+t.cellWidth/2,i.row*t.cellHeight+t.cellHeight/2,v,"square",t.roadDash)},border:function(){t.line(i.col*t.cellWidth,i.row*t.cellHeight,c,i.row*t.cellHeight,t.wallBorderWidth,"round")}},right:{wall:function(t,e,n,r){return function(){this.line(t,r*this.cellHeight,t,e,this.wallWidth,"square")}},road:function(){t.line(i.col*t.cellWidth+t.cellWidth/2,i.row*t.cellHeight+t.cellHeight/2,c,i.row*t.cellHeight+t.cellHeight/2,v,"square",t.roadDash)},border:function(){t.line(c,i.row*t.cellHeight,c,l,t.wallBorderWidth,"round")}},bottom:{wall:function(t,e,n,r){return function(){this.line(t,e,n*this.cellWidth,e,this.wallWidth,"square")}},road:function(){t.line(i.col*t.cellWidth+t.cellWidth/2,i.row*t.cellHeight+t.cellHeight/2,i.col*t.cellWidth+t.cellWidth/2,l,v,"square",t.roadDash)},border:function(){t.line(c,l,i.col*t.cellWidth,l,t.wallBorderWidth,"round")}},left:{wall:function(t,e,n,r){return function(){this.line(n*this.cellWidth,e,n*this.cellWidth,r*this.cellHeight,this.wallWidth,"square")}},road:function(){t.line(i.col*t.cellWidth,i.row*t.cellHeight+t.cellHeight/2,i.col*t.cellWidth+t.cellWidth/2,i.row*t.cellHeight+t.cellHeight/2,v,"square",t.roadDash)},border:function(){t.line(i.col*t.cellWidth,l,i.col*t.cellWidth,i.row*t.cellHeight,t.wallBorderWidth,"round")}}};for(var u in i.borders)i.borders[u]&&s[u]?(t.ctx.strokeStyle="#20444c",s[u].border(),r.push(s[u].wall(c,l,i.col,i.row))):!i.borders[u]&&s[u]&&(t.ctx.save(),t.ctx.strokeStyle="#476972",s[u].road(),t.ctx.restore());o%t.size.cols==0?e.push({index:o,cell:i}):(o+1)%t.size.cols==0&&n.push({index:o,cell:i})}),r.forEach(function(e){t.ctx.strokeStyle="#cccccc",e.call(t)}),this.currentIndex=e[Math.floor(Math.random()*e.length)].index,this.outputIndex=n[Math.floor(Math.random()*n.length)].index,this.currentRoute=i()({},this.dataset[this.currentIndex]),this.output=this.dataset[this.outputIndex],this.ctx.restore(),this.drawMoveObj(this.currentRoute);var o=new Image;o.src=a("./end.png"),o.onload=function(){var e=Math.min(o.width,.8*t.cellWidth),n=e*o.height/o.width,r={x:t.output.col*t.cellWidth+t.cellWidth/2-e/2,y:t.output.row*t.cellHeight+t.cellHeight-n};t.ctx.drawImage(o,r.x,r.y,e,n)}}},{key:"drawMoveObj",value:function(t){var e=this;if(this.moveObjImg){var n={x:t.location.x+this.cellWidth/2-this.moveObjSize.width/2,y:t.location.y+this.cellHeight/2-.4*this.moveObjSize.height};this.ctxForMove.drawImage(this.moveObjImg,n.x,n.y,this.moveObjSize.width,this.moveObjSize.height)}else this.moveObjImg=new Image,this.moveObjImg.src=a("./dog.png"),this.moveObjImg.onload=function(){var n=Math.min(e.moveObjImg.width,.75*e.cellWidth),r=n*e.moveObjImg.height/e.moveObjImg.width;e.moveObjSize={width:n,height:r};var i={x:t.col*e.cellWidth+e.cellWidth/2-n/2,y:t.row*e.cellHeight+e.cellHeight/2-.4*r};e.ctxForMove.drawImage(e.moveObjImg,i.x,i.y,n,r)}}},{key:"bind",value:function(){var t=this,e=new Hammer(this.canvasMove);e.get("swipe").set({direction:Hammer.DIRECTION_ALL}),e.on("swipe",function(e){!t.swipeLock&&h[e.direction]&&(t.swipeLock=!0,t.checkPath(h[e.direction]))})}},{key:"checkPath",value:function(t){function e(t,o){var c=void 0,l=void 0;switch(o){case"left":c=t-1;break;case"right":c=t+1;break;case"top":c=t-n.size.cols;break;case"bottom":c=t+n.size.cols}var s=i()({},n.dataset[c]);r.push({direction:o,index:c,cell:s});var u=0;for(var a in s.borders)s.borders[a]||a===f[o]||(u++,l=a);if(1!==u)return n.currentIndex=c,void n.move(r);e(c,l)}if(!this.dataset[this.currentIndex].borders[t]){var n=this,r=[];e(this.currentIndex,t)}}},{key:"move",value:function(t){function e(){if(!n.disable)if(n.ctxForMove.clearRect(0,0,n.canvasWidth,n.canvasHeight),l.x>0?(c.x+=s,l.x-=s):l.x<0&&(c.x-=s,l.x+=s),l.y>0?(c.y+=s,l.y-=s):l.y<0&&(c.y-=s,l.y+=s),n.drawMoveObj(i()({},r,{location:c})),Math.abs(l.x)<s&&Math.abs(l.y)<s){if(o.index===n.outputIndex)return void alert("闯关成功");n.currentRoute=i()({},o.cell),n.move(t)}else requestAnimationFrame(e)}if(!t||0===t.length)return void(this.swipeLock=!1);var n=this,r=i()({},n.currentRoute),o=t.shift(),c={x:r.col*n.cellWidth,y:r.row*n.cellHeight},l=null;switch(o.direction){case"left":l={x:-n.cellWidth,y:0};break;case"right":l={x:n.cellWidth,y:0};break;case"top":l={x:0,y:-n.cellHeight};break;case"bottom":l={x:0,y:n.cellHeight}}var s=2,u=l.x?Math.round(Math.abs(l.x)):Math.round(Math.abs(l.y));switch(!0){case u%5==0:s=5;break;case u%4==0:s=4;break;case u%3==0:s=3}e()}},{key:"stopMove",value:function(){this.disable=!0}}]),t}();e.a=p},function(t,e,n){t.exports={default:n(20),__esModule:!0}},function(t,e,n){t.exports={default:n(21),__esModule:!0}},function(t,e,n){n(45),t.exports=n(3).Object.assign},function(t,e,n){n(46);var r=n(3).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(14),i=n(41),o=n(40);t.exports=function(t){return function(e,n,c){var l,s=r(e),u=i(s.length),a=o(c,u);if(t&&n!=n){for(;u>a;)if((l=s[a++])!=l)return!0}else for(;u>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(6),i=n(5).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(12),i=n(37);t.exports=n(2)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(2)&&!n(4)(function(){return 7!=Object.defineProperty(n(27)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(35),i=n(33),o=n(36),c=n(42),l=n(11),s=Object.assign;t.exports=!s||n(4)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=c(t),s=arguments.length,u=1,a=i.f,h=o.f;s>u;)for(var f,d=l(arguments[u++]),v=a?r(d).concat(a(d)):r(d),p=v.length,g=0;p>g;)h.call(d,f=v[g++])&&(n[f]=d[f]);return n}:s},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(29),i=n(14),o=n(24)(!1),c=n(38)("IE_PROTO");t.exports=function(t,e){var n,l=i(t),s=0,u=[];for(n in l)n!=c&&r(l,n)&&u.push(n);for(;e.length>s;)r(l,n=e[s++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(34),i=n(28);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(39)("keys"),i=n(44);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(13),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(13),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(9);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(10);r(r.S+r.F,"Object",{assign:n(32)})},function(t,e,n){var r=n(10);r(r.S+r.F*!n(2),"Object",{defineProperty:n(12).f})},function(t,e,n){t.exports=n.p+"assets/dog.759df3f6.png"},function(t,e,n){t.exports=n.p+"assets/end.d2e9fad1.png"},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(1),c=n.n(o),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;i()(this,t),e&&(this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.canvas.width=n,this.canvas.height=r,this.size={width:n,height:r},this.line=this.line.bind(this))}return c()(t,[{key:"line",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"square",c=arguments[6];this.ctx.beginPath(),c?(this.ctx.setLineDash(c),this.ctx.lineCap="square"):this.ctx.lineCap=o,this.ctx.lineWidth=i,this.ctx.moveTo(t,e),this.ctx.lineTo(n,r),this.ctx.stroke(),this.ctx.closePath()}}]),t}();e.a=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n.n(r),o=n(15),c=(n.n(o),n(8)),l=n(16),s=n(17),u=document.querySelector("#canvas__bg"),a=document.querySelector("#canvas__move"),h=window.innerWidth-4,f=h,d=[],v=new l.a(11,10),p=v.cells;v.getCell;!function(){var t=p[parseInt(Math.random()*p.length,10)];i()({},t),function e(){t.visited=!0;var n=v.getCellNeighbour(t);if(n)d.push(t),c.a.removeBordersBetween(t,n),t=n;else{if(!d.length)return;t=d.pop()}e()}()}(),new s.a(u,a,h,f,{rows:11,cols:10},p)},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./dog.png":47,"./end.png":48};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=51}]);